<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="[Matlab使用-课程学习]-用遗传算法求解TSP问题, yunfei">
    <meta name="description" content="Matlab环境下使用遗传算法求解TSP问题摘要：遗传算法(genetic algorithm (GA))是计算数学中用于解决最优化的搜索算法，是进化算法的一种。而旅行商问题（travelling salesman problem, TSP">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>[Matlab使用-课程学习]-用遗传算法求解TSP问题 | yunfei</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">
    
    <script src="/libs/jquery/jquery.min.js"></script>
    
<link rel="alternate" href="/atom.xml" title="yunfei" type="application/atom+xml">
<link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head>


<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper head-container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">yunfei</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>

<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">yunfei</div>
        <div class="logo-desc">
            
            Never really desperate, only the lost of the soul.
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友情链接
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/fei0511/fei0511" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>

        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/fei0511/fei0511" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('https://pic.downk.cc/item/5e78c18e9dbe9d88c56225b7.png')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <div class="description center-align post-title">
                        [Matlab使用-课程学习]-用遗传算法求解TSP问题
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        margin: 35px 0 15px 0;
        padding-left: 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #toc-content .is-active-link::before {
        background-color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/Matlab%E4%BD%BF%E7%94%A8/">
                                <span class="chip bg-color">Matlab使用</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/%E8%AF%BE%E7%A8%8B%E5%AD%A6%E4%B9%A0/" class="post-category">
                                课程学习
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2020-03-23
                </div>
                

                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-check fa-fw"></i>更新日期:&nbsp;&nbsp;
                    2020-03-23
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>文章字数:&nbsp;&nbsp;
                    5.4k
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-clock fa-fw"></i>阅读时长:&nbsp;&nbsp;
                    19 分
                </div>
                
				
                
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="far fa-eye fa-fw"></i>阅读次数:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>
            
        </div>
        <hr class="clearfix">
        <div class="card-content article-card-content">
            <div id="articleContent">
                <h1 id="Matlab环境下使用遗传算法求解TSP问题"><a href="#Matlab环境下使用遗传算法求解TSP问题" class="headerlink" title="Matlab环境下使用遗传算法求解TSP问题"></a>Matlab环境下使用遗传算法求解TSP问题</h1><p><strong>摘要：</strong>遗传算法(genetic algorithm (GA))是<a href="https://zh.wikipedia.org/wiki/计算数学" target="_blank" rel="noopener">计算数学</a>中用于解决<a href="https://zh.wikipedia.org/wiki/最佳化" target="_blank" rel="noopener">最优化</a>的搜索<a href="https://zh.wikipedia.org/wiki/算法" target="_blank" rel="noopener">算法</a>，是<a href="https://zh.wikipedia.org/wiki/进化算法" target="_blank" rel="noopener">进化算法</a>的一种。而旅行商问题（travelling salesman problem, TSP）是<a href="https://zh.wikipedia.org/wiki/组合优化" target="_blank" rel="noopener">组合优化</a>中的一个<a href="https://zh.wikipedia.org/wiki/NP困难" target="_blank" rel="noopener">NP困难</a>问题。它可以描述为给定一系列城市和每对城市之间的距离，求解访问每一座城市一次并回到起始城市的最短回路。本文利用Matlab工具，通过使用遗传算法来求解TSP问题，来计算通过多个城市之间的最优路径与最短距离。</p>
<p><strong>关键词：</strong>遗传算法；TSP问题；组合优化；Matlab</p>
<h2 id="1-前言"><a href="#1-前言" class="headerlink" title="1 前言"></a>1 前言</h2><p>​        对于求解<em>n</em>个城市的TSP问题，存在(<em>n</em>-1)!条闭合路径的排列方案，因此 TSP问题是一个典型的NP完全问题。对于这类问题很难用全局搜索法精确地求出其最优解，因此研究相应的有效算法寻找其最优或近似最优解具有重要的理论意义。另外，很多实际实用的问题，如印刷电路板的钻孔路线方案、连锁店的货物配送路线等经过简化处理后，均可建模为旅行商问题，因此对旅行商问题求解方法的研究也具有重要的实用价值。目前求解TSP问题的主要方法有启发式搜索法、模拟退火算法、遗传算法、神经网络算法及二叉树描述算法，其中遗传算法是求解此类NP完全问题的一种比较有效的全局搜索方法[1]。 </p>
<p>​        本文首先在第二章介绍了TSP问题的概念以及数学模型；然后在第三章介绍了一下遗传算法的基本原理；最后在第四章在Matlab环境下，通过遗传算法来实现对多组城市的TSP平问题进行求解，来对遗传算法的性能进行了测试。最后对遗传算法的性能进行了简单的分析。</p>
<h2 id="2-TSP旅行商问题"><a href="#2-TSP旅行商问题" class="headerlink" title="2 TSP旅行商问题"></a>2 TSP旅行商问题</h2><h3 id="2-1-旅行商问题（TSP）描述"><a href="#2-1-旅行商问题（TSP）描述" class="headerlink" title="2.1 旅行商问题（TSP）描述"></a>2.1 旅行商问题（TSP）描述</h3><p>旅行商问题（Travelling salesman problem, TSP）：它是给定一系列城市和每对城市之间的距离，求解访问每一座城市一次并回到起始城市的最短回路。它是<a href="https://zh.wikipedia.org/wiki/组合优化" target="_blank" rel="noopener">组合优化</a>中的一个<a href="https://zh.wikipedia.org/wiki/NP困难" target="_blank" rel="noopener">NP困难</a>问题，在<a href="https://zh.wikipedia.org/wiki/运筹学" target="_blank" rel="noopener">运筹学</a>和<a href="https://zh.wikipedia.org/wiki/理論計算機科學" target="_blank" rel="noopener">理论计算机科学</a>中非常重要。如图2-1所示。</p>
<p><img src="https://pic.downk.cc/item/5e78b18e9dbe9d88c5599895.png" alt="图 2-1旅行商的解">       </p>
<p>本文主要通过遗传算法来解决TSP问题。该TSP问题可以简要概括为：事先已经获得了多组城市的位置信息（<em>x</em>和<em>y</em>）。通过计算每个城市之间的距离，利用遗传算法来得到一条从起始城市开始运动，不重复地经过每一个城市，最终再回到起始城市的最优路径，并计算出最优行驶距离。</p>
<h3 id="2-2-旅行商问题（TSP）数学模型"><a href="#2-2-旅行商问题（TSP）数学模型" class="headerlink" title="2.2 旅行商问题（TSP）数学模型"></a>2.2 旅行商问题（TSP）数学模型</h3><p>它的数学模型可以总结如下：</p>
<p>设有<em>n</em>个城市,它们的位置坐标为： {( <em>x</em>1 ,<em>y</em>1),( <em>x</em>2 ,<em>y</em>2),(<em>x</em>3,<em>y</em>3) ,… , (<em>x</em>n,<em>y</em>n)}。</p>
<p>从<em>n</em>个城市中随机选择一个城市作为起点，然后依次不重复地经过n座城市,最终返回起点。则该TSP问题的路径长度可以表示为：<br>$$<br>d_{min}=\sqrt[1/2]{\sum_{i=1}^{n-1}{(x_i-x_{i+1})^2+(y_i-y_{i+1})^2}} \tag {2.1}<br>$$<br>TSP是<a href="https://zh.wikipedia.org/w/index.php?title=旅行购买者问题&action=edit&redlink=1" target="_blank" rel="noopener">旅行购买者问题</a>与<a href="https://zh.wikipedia.org/wiki/车辆路径问题" target="_blank" rel="noopener">车辆路径问题</a>的一种特殊情况。TSP问题在1930年首次被形式化，并且是在最优化中研究最深入的问题之一。许多优化方法都用它作为一个基准。尽管问题在计算上很困难，但已经有了大量的<a href="https://zh.wikipedia.org/wiki/启发式" target="_blank" rel="noopener">启发式</a>和精确方法，因此可以完全求解城市数量上万的实例，并且甚至能在误差1%范围内估计上百万个城市的问题[2]。但是，求解TSP算法的<a href="https://zh.wikipedia.org/w/index.php?title=运行时间&action=edit&redlink=1" target="_blank" rel="noopener">时间复杂度</a>会随着城市数量的增多而成<a href="https://zh.wikipedia.org/w/index.php?title=指数时间假说&action=edit&redlink=1" target="_blank" rel="noopener">指数</a>级别增长。</p>
<h2 id="3-遗传算法"><a href="#3-遗传算法" class="headerlink" title="3 遗传算法"></a>3 遗传算法</h2><h3 id="3-1-遗传算法简介"><a href="#3-1-遗传算法简介" class="headerlink" title="3.1 遗传算法简介"></a>3.1 遗传算法简介</h3><p>  遗传算法由<a href="https://zh.wikipedia.org/wiki/密歇根大学" target="_blank" rel="noopener">密歇根大学</a>的<a href="https://zh.wikipedia.org/wiki/约翰·霍兰德" target="_blank" rel="noopener">约翰·霍兰德</a>和他的同事于二十世纪六十年代在对<a href="https://zh.wikipedia.org/wiki/細胞自動機" target="_blank" rel="noopener">细胞自动机</a>（cellular automata）进行研究时率先提出[3]。在二十世纪八十年代中期之前，对于遗传算法的研究还仅仅限于理论方面，直到在<a href="https://zh.wikipedia.org/wiki/匹兹堡" target="_blank" rel="noopener">匹兹堡</a>召开了第一届<a href="https://zh.wikipedia.org/w/index.php?title=世界遗传算法大会&action=edit&redlink=1" target="_blank" rel="noopener">世界遗传算法大会</a>。随着计算机计算能力的发展和实际应用需求的增多，遗传算法逐渐进入实际应用阶段。1989年，<a href="https://zh.wikipedia.org/wiki/纽约时报" target="_blank" rel="noopener">纽约时报</a>作者<a href="https://zh.wikipedia.org/w/index.php?title=约翰·马科夫&action=edit&redlink=1" target="_blank" rel="noopener">约翰·马科夫</a>写了一篇文章描述第一个商业用途的遗传算法–<a href="https://zh.wikipedia.org/w/index.php?title=进化者&action=edit&redlink=1" target="_blank" rel="noopener">进化者</a>（英文：Evolver）。之后，越来越多种类的遗传算法出现并被用于许多领域中，<a href="https://zh.wikipedia.org/wiki/财富杂志" target="_blank" rel="noopener">财富杂志</a>500强企业中大多数都用它进行时间表安排、数据分析、未来趋势预测、预算、以及解决很多其他组合优化问题。</p>
<p>遗传算法(genetic algorithm (GA))是<a href="https://zh.wikipedia.org/wiki/计算数学" target="_blank" rel="noopener">计算数学</a>中用于解决<a href="https://zh.wikipedia.org/wiki/最佳化" target="_blank" rel="noopener">最优化</a>的搜索<a href="https://zh.wikipedia.org/wiki/算法" target="_blank" rel="noopener">算法</a>，是<a href="https://zh.wikipedia.org/wiki/进化算法" target="_blank" rel="noopener">进化算法</a>的一种。进化算法最初是借鉴了<a href="https://zh.wikipedia.org/wiki/进化生物学" target="_blank" rel="noopener">进化生物学</a>中的一些现象而发展起来的，这些现象包括<a href="https://zh.wikipedia.org/wiki/遗传" target="_blank" rel="noopener">遗传</a>、<a href="https://zh.wikipedia.org/wiki/突变" target="_blank" rel="noopener">突变</a>、<a href="https://zh.wikipedia.org/wiki/自然选择" target="_blank" rel="noopener">自然选择</a>以及<a href="https://zh.wikipedia.org/wiki/杂交" target="_blank" rel="noopener">杂交</a>等。</p>
<p>遗传算法通常实现方式为一种<a href="https://zh.wikipedia.org/wiki/计算机模拟" target="_blank" rel="noopener">计算机模拟</a>。对于一个最优化问题，一定数量的<a href="https://zh.wikipedia.org/w/index.php?title=候选解&action=edit&redlink=1" target="_blank" rel="noopener">候选解</a>（称为个体）可抽象表示为<a href="https://zh.wikipedia.org/wiki/染色體_(遺傳演算法)" target="_blank" rel="noopener">染色体</a>，使<a href="https://zh.wikipedia.org/wiki/种群" target="_blank" rel="noopener">种群</a>向更好的解进化。传统上，解用<a href="https://zh.wikipedia.org/wiki/二进制" target="_blank" rel="noopener">二进制</a>表示（即0和1的串），但也可以用其他表示方法。进化从完全<a href="https://zh.wikipedia.org/wiki/随机" target="_blank" rel="noopener">随机</a>个体的种群开始，之后一代一代发生。在每一代中评价整个种群的<a href="https://zh.wikipedia.org/wiki/适应度" target="_blank" rel="noopener">适应度</a>，从当前种群中随机地选择多个个体（基于它们的适应度），通过自然选择和突变产生新的生命种群，该种群在算法的下一次迭代中成为当前种群。</p>
<h3 id="3-2-遗传算法的构成要素"><a href="#3-2-遗传算法的构成要素" class="headerlink" title="3.2 遗传算法的构成要素"></a>3.2 遗传算法的构成要素</h3><h4 id="3-2-1-编码与解码"><a href="#3-2-1-编码与解码" class="headerlink" title="3.2.1 编码与解码"></a>3.2.1 编码与解码</h4><p>在遗传算法里，优化问题的解被称为个体，它表示为一个变量序列，叫做<a href="https://zh.wikipedia.org/wiki/染色體_(遺傳演算法)" target="_blank" rel="noopener">染色体</a>或者<a href="https://zh.wikipedia.org/wiki/基因" target="_blank" rel="noopener">基因</a><a href="https://zh.wikipedia.org/wiki/字符串" target="_blank" rel="noopener">串</a>。染色体一般被表达为简单的字符串或数字符串，不过也有其他的依赖于特殊问题的表示方法适用，这一过程称为编码。</p>
<p>首先，算法<a href="https://zh.wikipedia.org/wiki/随机函数" target="_blank" rel="noopener">随机</a>生成一定数量的个体，有时候操作者也可以干预这个随机产生过程，以提高初始种群的质量。在每一代中，都会评价每一个体，并通过计算<a href="https://zh.wikipedia.org/w/index.php?title=适应度函数&action=edit&redlink=1" target="_blank" rel="noopener">适应度函数</a>得到<a href="https://zh.wikipedia.org/wiki/适应度" target="_blank" rel="noopener">适应度</a>数值。按照适应度<a href="https://zh.wikipedia.org/wiki/排序" target="_blank" rel="noopener">排序</a>种群个体，适应度高的在前面。这里的“高”是相对于初始的种群的低适应度而言。</p>
<h4 id="3-2-2-适应度计算"><a href="#3-2-2-适应度计算" class="headerlink" title="3.2.2 适应度计算"></a>3.2.2 适应度计算</h4><p>适应度（Fitness），又可称适存度，是<a href="https://zh.wikipedia.org/wiki/生物學" target="_blank" rel="noopener">生物学</a>，特别是<a href="https://zh.wikipedia.org/wiki/群體遺傳學" target="_blank" rel="noopener">群体遗传学</a>、<a href="https://zh.wikipedia.org/wiki/數理生物學" target="_blank" rel="noopener">数理生物学</a>中用来描述拥有某一特定<a href="https://zh.wikipedia.org/wiki/基因型" target="_blank" rel="noopener">基因型</a>的<a href="https://zh.wikipedia.org/wiki/個體" target="_blank" rel="noopener">个体</a>，在<a href="https://zh.wikipedia.org/wiki/繁殖" target="_blank" rel="noopener">繁殖</a>上的成功率或能力。假如带有不同基因型的个体拥有不同的适应度，那么这些基因型的比例将会在世代交替之后有所变动。而造成这种比例变动的机制是<a href="https://zh.wikipedia.org/wiki/自然選擇" target="_blank" rel="noopener">自然选择</a>。</p>
<p>遗传算法依据原则：适应度越高，被选择的机会越高，而适应度低的，被选择的机会就低。但是，并不不意味着完全以适应度高低为导向，因为单纯选择适应度高的个体将可能导致算法快速收敛到局部最优解而非全局最优解。因此，它还会通过<a href="https://zh.wikipedia.org/wiki/繁殖" target="_blank" rel="noopener">繁殖</a>完成，其中繁殖包括交配（crossover，交叉操作）和变异（mutation）。</p>
<h4 id="3-2-3-交叉"><a href="#3-2-3-交叉" class="headerlink" title="3.2.3 交叉"></a>3.2.3 交叉</h4><p>交叉（crossover）是<a href="https://zh.wikipedia.org/wiki/遗传算法" target="_blank" rel="noopener">遗传算法</a>中由<a href="https://zh.wikipedia.org/wiki/遗传学" target="_blank" rel="noopener">遗传学</a>中<a href="https://zh.wikipedia.org/wiki/染色体" target="_blank" rel="noopener">染色体</a><a href="https://zh.wikipedia.org/w/index.php?title=交叉互换&action=edit&redlink=1" target="_blank" rel="noopener">交叉互换</a>、生物<a href="https://zh.wikipedia.org/wiki/杂交" target="_blank" rel="noopener">杂交</a>等现象发展来的一个<a href="https://zh.wikipedia.org/wiki/算法" target="_blank" rel="noopener">算法</a><a href="https://zh.wikipedia.org/w/index.php?title=过程_(计算机)&action=edit&redlink=1" target="_blank" rel="noopener">过程</a>，相当于生物学中的基因重组。交叉操作是遗传算法的核心部分。</p>
<p>杂交操作就是将两个父本染色体上的基因进行重新组合分配，从而产生下一代个体的过程，通过杂交可能会将两个父本的优势基因组合在一起，产生适应度更高、更接近最优解的新个体。通常杂交算法和基因的编码方式有关，当前采用最多的是二进制编码方式，二进制编码的主要杂交算法有：单点交叉、多点交叉以及均匀交叉等。</p>
<p>一般的遗传算法都有一个交配概率（又称为交叉概率），范围一般是0.6~1，这个交配概率反映两个被选中的个体进行交配的<a href="https://zh.wikipedia.org/wiki/概率" target="_blank" rel="noopener">概率</a>。例如，交配概率为0.8，则80%的“夫妻”会生育后代。每两个个体通过交配产生两个新个体，代替原来的“老”个体，而不交配的个体则保持不变。交配父母的染色体相互交换，从而产生两个新的染色体，第一个个体前半段是父亲的染色体，后半段是母亲的，第二个个体则正好相反。不过这里的半段并不是真正的一半，这个位置叫做交配点，也是随机产生的，可以是染色体的任意位置。</p>
<h4 id="3-2-4-变异"><a href="#3-2-4-变异" class="headerlink" title="3.2.4 变异"></a>3.2.4 变异</h4><p>在<a href="https://zh.wikipedia.org/wiki/遗传算法" target="_blank" rel="noopener">遗传算法</a>里面，变异是用来维持算法里面，族群（population）里面每一个世代的<a href="https://zh.wikipedia.org/wiki/染色體_(遺傳演算法)" target="_blank" rel="noopener">染色体</a>到下一个世代时，还能够维持<a href="https://zh.wikipedia.org/wiki/遺傳多樣性" target="_blank" rel="noopener">遗传多样性</a>的一个<a href="https://zh.wikipedia.org/wiki/遺傳運算元" target="_blank" rel="noopener">遗传算子</a>（genetic operator）。这个算子设计上相当于生物学方面的<a href="https://zh.wikipedia.org/wiki/突變" target="_blank" rel="noopener">突变</a>。</p>
<p>通过突变产生新的“子”个体。一般遗传算法都有一个固定的<a href="https://zh.wikipedia.org/w/index.php?title=突变常数&action=edit&redlink=1" target="_blank" rel="noopener">突变常数</a>（又称为变异概率），通常是0.1或者更小，这代表变异发生的概率。根据这个概率，新个体的染色体随机的突变，通常就是改变染色体的一个字节（0变到1，或者1变到0）。</p>
<p>遗传算法里面突变的目的在于维持并且提升多样性。突变应该要能够借由避免让族群里的染色体过于相近，来防范算法掉入<a href="https://zh.wikipedia.org/wiki/极值" target="_blank" rel="noopener">区域极值</a>，因此减慢或者停止进化过程。相同的理由也可以用来解释为何大多数遗传算法的系统避免只使用<a href="https://zh.wikipedia.org/w/index.php?title=適應函數&action=edit&redlink=1" target="_blank" rel="noopener">最适合</a>的染色体来产生下一代 ，而是在一些比较适合的里面随机（或者半随机）的选择出一些来产生下一代。</p>
<h4 id="3-2-5-终止条件"><a href="#3-2-5-终止条件" class="headerlink" title="3.2.5 终止条件"></a>3.2.5 终止条件</h4><p>遗传算法通过循环执行选择和繁殖操作，来不断寻找最优解，直到满足终止条件时结束循环。它的终止条件有以下几种：</p>
<p>（1）进化次数限制；</p>
<p>（2）计算耗费的资源限制（例如计算时间、计算占用的内存等）；</p>
<p>（3）一个个体已经满足最优值的条件，即最优值已经找到；</p>
<p>（4）适应度已经达到饱和，继续进化不会产生适应度更好的个体；</p>
<p>（5）人为干预；</p>
<p>（6）以及以上两种或更多种的组合。</p>
<h3 id="3-3-遗传算法基本流程"><a href="#3-3-遗传算法基本流程" class="headerlink" title="3.3 遗传算法基本流程"></a>3.3 遗传算法基本流程</h3><p>经过这一系列的过程（选择、交配和突变），产生的新一代个体不同于初始的一代，并一代一代向增加整体适应度的方向发展，因为总是更常选择最好的个体产生下一代，而适应度低的个体逐渐被淘汰掉。这样的过程不断的重复：评价每个个体，计算适应度，两两交配，然后突变，产生第三代。周而复始，直到终止条件满足为止[5]。遗传算法的基本流程可以总结为：</p>
<p>1）首先选择初始生命种群</p>
<p>2）评价种群中的个体适应度</p>
<p>3）以比例原则（分数高的挑中几率也较高）选择产生下一个种群（<a href="https://zh.wikipedia.org/w/index.php?title=輪盤法&action=edit&redlink=1" target="_blank" rel="noopener">轮盘法</a>（roulette wheel selection）。不仅仅挑分数最高的的原因是这么做可能收敛到局部的最佳点，而非整体的。</p>
<p>5）通过交叉和变异来更新该种群个体</p>
<p>6）直到满足终止条件停止遗传算法的执行。</p>
<p>其整体基本流程图如图3-1所示：</p>
<p><img src="https://pic.downk.cc/item/5e78bf299dbe9d88c560c521.png" alt="图3-1 遗传算法基本流程图"></p>
<h2 id="4-遗传算法求解TSP问题"><a href="#4-遗传算法求解TSP问题" class="headerlink" title="4 遗传算法求解TSP问题"></a>4 遗传算法求解TSP问题</h2><h3 id="4-1-TSP问题求解"><a href="#4-1-TSP问题求解" class="headerlink" title="4.1 TSP问题求解"></a>4.1 TSP问题求解</h3><p>本文通过遗传算法来求解包含<em>n</em>个城市（<em>n</em>=10,30,100）的TSP的最优解问题。</p>
<p>该TSP问题通过遗传算法来进行求解，需要执行以下步骤：</p>
<p>第一步是需要来初始化种群的每个染色体样本。在本文中，定义种群的大小为m。每个染色体的长度等于城市的数目n。每个染色体的值x是由每个城市的编号（1~n）随机排列组成。如：<em>x</em>i = {1, 2 , 5 , 3, 7 , 9, 10 , 6 , 4, 8} 。</p>
<p>第二步是来计算每条行驶路径，将行驶路径长度的倒数作为该个体的适应度。即距离越短，适应度越大。在程序实现过程，我所采取的的适应度计算方法是：<br>$$<br>f(x_i)=(\frac{1}{d})^{15}<br>  \tag{4.1}<br>$$<br>其中<em>d</em>为路径的总长度，<em>x</em>i为单个染色体，<em>f</em>为适应度函数。对距离求倒数后，又乘以15次方的原因是为了让好的个体被选取到的概率更大。因为适应度取距离的倒数后，若不乘上次方，则每个个体之间的适应度差别不大。这里的15也可以通过实验换成其他值。然后通过轮盘赌选择算法来对个体进行更新。适应度越高的个体，越容易被挑中，遗传到下一代。</p>
<p>第三步是通过交叉和变异操作来更新个体，需找最优解。在程序中，其中交叉操作采用的是随机交叉变异。首先，随机产生一个交叉的位置，然后在该位置处，将两个需要进行交叉变异的父代个体，从该位置开始到染色体末端交换编码信息，产生新的子代个体。而变异过程是在个体中找到两个需要变异的位置，将两者的信息进行交换，从而完成变异操作。</p>
<p>最后，直到满足停止条件（达到最大迭代次数），输出寻找到的最优路径和最短距离，整个程序结束。</p>
<h3 id="4-2-实验平台"><a href="#4-2-实验平台" class="headerlink" title="4.2 实验平台"></a>4.2 实验平台</h3><p>本实验所采用的的实验平台是在Windows 10 操作系统上的Matlab 2018a 环境下实现的。通过使用Matlab语言，来实现遗传算法，并求解TSP问题。如图4-1所示，为该实验的实验平台。</p>
<p> <img src="https://pic.downk.cc/item/5e78bf299dbe9d88c560c528.png" alt="图 4-1 实验平台">    </p>
<h3 id="4-3-实验结果"><a href="#4-3-实验结果" class="headerlink" title="4.3 实验结果"></a>4.3 实验结果</h3><p>(1) 当城市数目n=10时，</p>
<p><img src="https://pic.downk.cc/item/5e78bf299dbe9d88c560c52f.png" alt="图 4-2a 仿真结果（n=10）"></p>
<p><img src="https://pic.downk.cc/item/5e78bf299dbe9d88c560c535.png" alt="图 4-2b 仿真结果（n=10）"></p>
<p>​    </p>
<p>最终当城市数目为10个时，遗传算法能够很好地找到一条最优的行驶路径，如图4-2(a)所示。图4-2（b）为遗传算法计算得到的最短路径随算法迭代次数变换的曲线。它充分地表明了醉着算法的不断迭代，最终能够得到一个最优的路径。图4-3 是遗传算法最终得到的最优路径、最短距离以及获得最优结果所迭代的次数。</p>
<p>(2) 当城市数目n=30时，</p>
<p><img src="https://pic.downk.cc/item/5e78c0a19dbe9d88c5618c2f.png" alt="图 4-4a 仿真结果（n=30）"></p>
<p><img src="https://pic.downk.cc/item/5e78c0a19dbe9d88c5618c35.png" alt="图 4-4b 仿真结果（n=30）"></p>
<p><img src="https://pic.downk.cc/item/5e78c0a19dbe9d88c5618c3d.png" alt="图 4-5 最优路径（n=30）"></p>
<p>最终当城市数目增加到30个时，遗传算法仍然能够找到一条最优的行驶路径，如图4-4(a)所示。图4-4（b）为遗传算法计算得到的最短路径随算法迭代次数变换的曲线。随着算法的不断迭代，获得的最短距离也越来越小。图4-5 是遗传算法最终得到的最优路径、最短距离以及获得最优结果所迭代的次数。</p>
<p>(3) 当城市数目n=100时，</p>
<p>当城市数目增加到100时，我将算法的迭代次数增加到了1000次，由图4-6(a)可知遗传算法仍然没有找到该问题的最优解。但是由图4-6(b)可知，路径的最优距离一直在随着迭代次数不断变小，表明了只要遗传算法的迭代次数足够大，最终一定能够得到一个比较接近于最优解的值。图4-7 是通过遗传算法得到的最优路径、最短距离以及获得最优结果所迭代的次数。</p>
<p><img src="https://pic.downk.cc/item/5e78c0a19dbe9d88c5618c43.png" alt="图 4-6 仿真结果（n=100) a"></p>
<p><img src="https://pic.downk.cc/item/5e78c0a19dbe9d88c5618c4d.png" alt="图 4-6 仿真结果（n=100)b"></p>
<p><img src="https://pic.downk.cc/item/5e78c18d9dbe9d88c56225ab.png" alt=""></p>
<p>（4）改变种群内个体数目为m = 50和100时，</p>
<p><img src="https://pic.downk.cc/item/5e78c18d9dbe9d88c56225b0.png" alt="图 4-8 改变种群染色体个数(m=50)"></p>
<p><img src="https://pic.downk.cc/item/5e78c18e9dbe9d88c56225b7.png" alt="图 4-8 改变种群染色体个数(m=100)"></p>
<p>当改变遗传算法的初始种群大小时（即进行遗传的个体的数目），通过对比图4-8（a）与图4-8（b）可知，随着增加种群内个体的数目，最终更容易得到TSP问题的最优解，得到更加有效的最优路径。这表明了初始种群内的个体数量很重要，如果初始种群数量过多，算法会占用大量系统资源；如果初始种群数量过少，算法很可能找不到最优解。</p>
<p>（5）改变基因突变的概率为mutate_rate = 0.05和0.5时，</p>
<p><img src="https://pic.downk.cc/item/5e78c18e9dbe9d88c56225bb.png" alt="图4-9(a) mutate_rate = 0.05"></p>
<p><img src="https://pic.downk.cc/item/5e78c18e9dbe9d88c56225c0.png" alt="图4-9(b)mutate_rate=0.5"></p>
<p>当改变遗传算法的基因突变的概率时，通过对比图4-9（a）与图4-9（b）的实验结果可知，当mutate_rate = 0.05时，得到的最短距离为17651；而当mutate_rate = 0.5时，最终得到的最短距离为14227。随着基因突变的概率增加，算法更容易得到全局最优解，避免算法陷入局部最优解。但是，如果基因突变的概率太大，算法的收敛速度将会变得很慢。</p>
<h3 id="4-4-本章小结"><a href="#4-4-本章小结" class="headerlink" title="4.4 本章小结"></a>4.4 本章小结</h3><p>通过上面的实验结果我们能够知道：随着城市数目的增加，遗传算法的计算复杂度也在呈指数形式增加。当城市数目较小时，遗传算法能够得到该TSP问题的最优解。但当城市数目太大时，只能不断提高算法的迭代次数，来提高最优解的质量。</p>
<p>对于任何一个具体的优化问题，调节遗传算法的参数可能会有利于更好更快收敛，这些参数包括个体数目、交叉率和变异率。例如太大的变异率会导致丢失最优解，而过小的变异率会导致算法过早的收敛于局部最优点。对于这些参数的选择，需要我们通过实验不断的进行尝试，或者将遗传算法与其他算法进行结合使用，来提高遗传算法的效率。</p>
<h2 id="5-总结"><a href="#5-总结" class="headerlink" title="5 总结"></a>5 总结</h2><p>本文首先讲解了TSP问题的基本概念及数学模型；之后又对遗传算法的基本原理进行了讲解。最后在Matlab环境中，通过对不同城市数目的多组数据来用遗传算法来进行最优解的计算。通过实验结果表明，在数据量不太多的情况下，遗传算法能够求得比较好的解。</p>
<h2 id="6-主程序"><a href="#6-主程序" class="headerlink" title="6  主程序"></a>6  主程序</h2><p>**</p>
<pre class=" language-matlab"><code class="language-matlab">``<span class="token comment" spellcheck="true">%Matlab****程序**``</span>

`<span class="token operator">*</span><span class="token operator">*</span><span class="token comment" spellcheck="true">%** **main.m**`</span>

`<span class="token comment" spellcheck="true">% 遗传算法求解TSP问题`</span>

`clear<span class="token punctuation">;</span>`

`clear all<span class="token punctuation">;</span>`

`CityNum <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">% 城市数目，可以选 10, 30, 50, 75`</span>

`<span class="token punctuation">[</span>dislist<span class="token punctuation">,</span> Clist<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">tsp</span><span class="token punctuation">(</span>CityNum<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">% dislist 为城市之间相互的距离，Clist 为各城市的坐标`</span>

```` 

`inn <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">% 初始种群大小`</span>

`gnMax <span class="token operator">=</span> <span class="token number">500</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">% 最大代数`</span>

`crossProb <span class="token operator">=</span> <span class="token number">0.8</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">% 交叉概率`</span>

`muteProb <span class="token operator">=</span> <span class="token number">0.5</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">% 变异概率`</span>

```` 

`<span class="token comment" spellcheck="true">% 随机产生初始种群`</span>

`population <span class="token operator">=</span> <span class="token function">zeros</span><span class="token punctuation">(</span>inn<span class="token punctuation">,</span> CityNum<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">% population 为初始种群，包括多条染色体`</span>

`<span class="token keyword">for</span> <span class="token number">i</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">:</span> inn`

  `<span class="token function">population</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">,</span><span class="token operator">:</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">randperm</span><span class="token punctuation">(</span>CityNum<span class="token punctuation">)</span><span class="token punctuation">;</span>`

`<span class="token keyword">end</span>`

`<span class="token punctuation">[</span><span class="token operator">~</span><span class="token punctuation">,</span> cumulativeProbs<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">calPopulationValue</span><span class="token punctuation">(</span>population<span class="token punctuation">,</span> dislist<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">% 计算种群每条染色体的累计概率`</span>

```` 

`generationNum <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>`

`generationMeanValue <span class="token operator">=</span> <span class="token function">zeros</span><span class="token punctuation">(</span>generationNum<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">% 每一代的平均距离`</span>

`generationMaxValue <span class="token operator">=</span> <span class="token function">zeros</span><span class="token punctuation">(</span>generationNum<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">% 每一代的最短距离`</span>

`bestRoute <span class="token operator">=</span> <span class="token function">zeros</span><span class="token punctuation">(</span>inn<span class="token punctuation">,</span> CityNum<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">% 最佳路径`</span>

`newPopulation <span class="token operator">=</span> <span class="token function">zeros</span><span class="token punctuation">(</span>inn<span class="token punctuation">,</span> CityNum<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">% 新的种群`</span>

`<span class="token keyword">while</span> generationNum <span class="token operator">&lt;</span> gnMax <span class="token operator">+</span> <span class="token number">1</span>`

  `<span class="token keyword">for</span> <span class="token number">j</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">2</span> <span class="token operator">:</span> inn`

   `selectedChromos <span class="token operator">=</span> <span class="token function">select</span><span class="token punctuation">(</span>cumulativeProbs<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">% 选择操作，选出两条需要交叉编译的染色体，即父亲母亲`</span>

   `crossedChromos <span class="token operator">=</span> <span class="token function">cross</span><span class="token punctuation">(</span>population<span class="token punctuation">,</span> selectedChromos<span class="token punctuation">,</span> crossProb<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">% 交叉操作，返回交叉后的染色体`</span>

   `<span class="token function">newPopulation</span><span class="token punctuation">(</span><span class="token number">j</span><span class="token punctuation">,</span> <span class="token operator">:</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">mut</span><span class="token punctuation">(</span><span class="token function">crossedChromos</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">:</span><span class="token punctuation">)</span><span class="token punctuation">,</span>muteProb<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">% 对交叉后的染色体进行变异操作`</span>

   `<span class="token function">newPopulation</span><span class="token punctuation">(</span><span class="token number">j</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">:</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">mut</span><span class="token punctuation">(</span><span class="token function">crossedChromos</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token operator">:</span><span class="token punctuation">)</span><span class="token punctuation">,</span> muteProb<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">% 对交叉后的染色体进行变异操作`</span>

  `<span class="token keyword">end</span>`

  `population <span class="token operator">=</span> newPopulation<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">%产生了新的种群`</span>

  `<span class="token punctuation">[</span>populationValue<span class="token punctuation">,</span> cumulativeProbs<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">calPopulationValue</span><span class="token punctuation">(</span>population<span class="token punctuation">,</span> dislist<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">% 计算新种群的适应度`</span>

  `<span class="token comment" spellcheck="true">% 记录当前代最好和平均的适应度`</span>

  `<span class="token punctuation">[</span>fmax<span class="token punctuation">,</span> nmax<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>populationValue<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">% 因为计算适应度时取距离的倒数，这里面取最大的倒数，即最短的距离`</span>

  `<span class="token function">generationMeanValue</span><span class="token punctuation">(</span>generationNum<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">/</span> <span class="token function">mean</span><span class="token punctuation">(</span>populationValue<span class="token punctuation">)</span><span class="token punctuation">;</span>` 

  `<span class="token function">generationMaxValue</span><span class="token punctuation">(</span>generationNum<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">/</span> fmax<span class="token punctuation">;</span>`  

  `bestChromo <span class="token operator">=</span> <span class="token function">population</span><span class="token punctuation">(</span>nmax<span class="token punctuation">,</span> <span class="token operator">:</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">% 前代最佳染色体，即对应的路径`</span>

  `<span class="token function">bestRoute</span><span class="token punctuation">(</span>generationNum<span class="token punctuation">,</span> <span class="token operator">:</span><span class="token punctuation">)</span> <span class="token operator">=</span> bestChromo<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">% 记录每一代的最佳染色体`</span>

  `<span class="token function">drawTSP</span><span class="token punctuation">(</span>Clist<span class="token punctuation">,</span> bestChromo<span class="token punctuation">,</span> <span class="token function">generationMaxValue</span><span class="token punctuation">(</span>generationNum<span class="token punctuation">)</span><span class="token punctuation">,</span> generationNum<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>`

  `generationNum <span class="token operator">=</span> generationNum <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>`

`<span class="token keyword">end</span>`

`<span class="token punctuation">[</span>bestValue<span class="token punctuation">,</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>generationMaxValue<span class="token punctuation">)</span><span class="token punctuation">;</span>`

`<span class="token function">drawTSP</span><span class="token punctuation">(</span>Clist<span class="token punctuation">,</span> <span class="token function">bestRoute</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token operator">:</span><span class="token punctuation">)</span><span class="token punctuation">,</span> bestValue<span class="token punctuation">,</span> index<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>`

```` 

`<span class="token function">figure</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>`

`<span class="token function">plot</span><span class="token punctuation">(</span>generationMaxValue<span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>` 

`hold on<span class="token punctuation">;</span>`

`<span class="token function">plot</span><span class="token punctuation">(</span>generationMeanValue<span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>` 

`grid<span class="token punctuation">;</span>`

`<span class="token function">title</span><span class="token punctuation">(</span><span class="token string">'搜索过程'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>`

`<span class="token function">legend</span><span class="token punctuation">(</span><span class="token string">'最优解'</span><span class="token punctuation">,</span> <span class="token string">'平均解'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>`

`<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'遗传算法得到的最优迭代次数为: %d\n'</span><span class="token punctuation">,</span> index<span class="token punctuation">)</span><span class="token punctuation">;</span>`

`<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'遗传算法得到的最短距离: %.2f\n'</span><span class="token punctuation">,</span> bestValue<span class="token punctuation">)</span><span class="token punctuation">;</span>`

`<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'遗传算法得到的最短路线:'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>`

`<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'%d ->'</span><span class="token punctuation">,</span> <span class="token function">bestRoute</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>`

`<span class="token function">fprintf</span><span class="token punctuation">(</span>"<span class="token operator">\</span>n"<span class="token punctuation">)</span><span class="token punctuation">;</span>`

`<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'%d ->'</span><span class="token punctuation">,</span> <span class="token function">bestRoute</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span><span class="token number">16</span><span class="token operator">:</span><span class="token keyword">end</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>`

`<span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token string">'%d \n'</span><span class="token punctuation">,</span> <span class="token function">bestRoute</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>`

`` 

`` 

</code></pre>
<h5 id="详细代码及文件下载地址："><a href="#详细代码及文件下载地址：" class="headerlink" title="详细代码及文件下载地址："></a>详细代码及文件下载地址：</h5><p>链接：<a href="https://pan.baidu.com/s/18bS-bDjiSq-7vgNOKWPIAg" target="_blank" rel="noopener">https://pan.baidu.com/s/18bS-bDjiSq-7vgNOKWPIAg</a><br>提取码：bixs </p>

            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="http://fei0511.github.io" rel="external nofollow noreferrer">fei</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="http://fei0511.github.io/2020/03/23/matlab-shi-yong-ke-cheng-xue-xi-yong-yi-chuan-suan-fa-qiu-jie-tsp-wen-ti/">http://fei0511.github.io/2020/03/23/matlab-shi-yong-ke-cheng-xue-xi-yong-yi-chuan-suan-fa-qiu-jie-tsp-wen-ti/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="http://fei0511.github.io" target="_blank">fei</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/Matlab%E4%BD%BF%E7%94%A8/">
                                    <span class="chip bg-color">Matlab使用</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">

<div id="article-share">
    
    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>
            
        </div>
    </div>

    

    

    

    

    
        <style>
    .valine-card {
        margin: 1.5rem auto;
    }

    .valine-card .card-content {
        padding: 20px 20px 5px 20px;
    }

    #vcomments textarea {
        box-sizing: border-box;
        background: url("/medias/comment_bg.png") 100% 100% no-repeat;
    }

    #vcomments p {
        margin: 2px 2px 10px;
        font-size: 1.05rem;
        line-height: 1.78rem;
    }

    #vcomments blockquote p {
        text-indent: 0.2rem;
    }

    #vcomments a {
        padding: 0 2px;
        color: #4cbf30;
        font-weight: 500;
        text-decoration: none;
    }

    #vcomments img {
        max-width: 100%;
        height: auto;
        cursor: pointer;
    }

    #vcomments ol li {
        list-style-type: decimal;
    }

    #vcomments ol,
    ul {
        display: block;
        padding-left: 2em;
        word-spacing: 0.05rem;
    }

    #vcomments ul li,
    ol li {
        display: list-item;
        line-height: 1.8rem;
        font-size: 1rem;
    }

    #vcomments ul li {
        list-style-type: disc;
    }

    #vcomments ul ul li {
        list-style-type: circle;
    }

    #vcomments table, th, td {
        padding: 12px 13px;
        border: 1px solid #dfe2e5;
    }

    #vcomments table, th, td {
        border: 0;
    }

    table tr:nth-child(2n), thead {
        background-color: #fafafa;
    }

    #vcomments table th {
        background-color: #f2f2f2;
        min-width: 80px;
    }

    #vcomments table td {
        min-width: 80px;
    }

    #vcomments h1 {
        font-size: 1.85rem;
        font-weight: bold;
        line-height: 2.2rem;
    }

    #vcomments h2 {
        font-size: 1.65rem;
        font-weight: bold;
        line-height: 1.9rem;
    }

    #vcomments h3 {
        font-size: 1.45rem;
        font-weight: bold;
        line-height: 1.7rem;
    }

    #vcomments h4 {
        font-size: 1.25rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    #vcomments h5 {
        font-size: 1.1rem;
        font-weight: bold;
        line-height: 1.4rem;
    }

    #vcomments h6 {
        font-size: 1rem;
        line-height: 1.3rem;
    }

    #vcomments p {
        font-size: 1rem;
        line-height: 1.5rem;
    }

    #vcomments hr {
        margin: 12px 0;
        border: 0;
        border-top: 1px solid #ccc;
    }

    #vcomments blockquote {
        margin: 15px 0;
        border-left: 5px solid #42b983;
        padding: 1rem 0.8rem 0.3rem 0.8rem;
        color: #666;
        background-color: rgba(66, 185, 131, .1);
    }

    #vcomments pre {
        font-family: monospace, monospace;
        padding: 1.2em;
        margin: .5em 0;
        background: #272822;
        overflow: auto;
        border-radius: 0.3em;
        tab-size: 4;
    }

    #vcomments code {
        font-family: monospace, monospace;
        padding: 1px 3px;
        font-size: 0.92rem;
        color: #e96900;
        background-color: #f8f8f8;
        border-radius: 2px;
    }

    #vcomments pre code {
        font-family: monospace, monospace;
        padding: 0;
        color: #e8eaf6;
        background-color: #272822;
    }

    #vcomments pre[class*="language-"] {
        padding: 1.2em;
        margin: .5em 0;
    }

    #vcomments code[class*="language-"],
    pre[class*="language-"] {
        color: #e8eaf6;
    }

    #vcomments [type="checkbox"]:not(:checked), [type="checkbox"]:checked {
        position: inherit;
        margin-left: -1.3rem;
        margin-right: 0.4rem;
        margin-top: -1px;
        vertical-align: middle;
        left: unset;
        visibility: visible;
    }

    #vcomments b,
    strong {
        font-weight: bold;
    }

    #vcomments dfn {
        font-style: italic;
    }

    #vcomments small {
        font-size: 85%;
    }

    #vcomments cite {
        font-style: normal;
    }

    #vcomments mark {
        background-color: #fcf8e3;
        padding: .2em;
    }

    #vcomments table, th, td {
        padding: 12px 13px;
        border: 1px solid #dfe2e5;
    }

    table tr:nth-child(2n), thead {
        background-color: #fafafa;
    }

    #vcomments table th {
        background-color: #f2f2f2;
        min-width: 80px;
    }

    #vcomments table td {
        min-width: 80px;
    }

    #vcomments [type="checkbox"]:not(:checked), [type="checkbox"]:checked {
        position: inherit;
        margin-left: -1.3rem;
        margin-right: 0.4rem;
        margin-top: -1px;
        vertical-align: middle;
        left: unset;
        visibility: visible;
    }
</style>

<div class="card valine-card" data-aos="fade-up">
    <div class="comment_headling" style="font-size: 20px; font-weight: 700; position: relative; left: 20px; top: 15px; padding-bottom: 5px;">
        <i class="fas fa-comments fa-fw" aria-hidden="true"></i>
        <span>评论</span>
    </div>
    <div id="vcomments" class="card-content" style="display: grid">
    </div>
</div>

<script src="/libs/valine/av-min.js"></script>
<script src="/libs/valine/Valine.min.js"></script>
<script>
    new Valine({
        el: '#vcomments',
        appId: 'CbSh9xXlbJQQTLeldkWq66dx-gzGzoHsz',
        appKey: 'oe4hJRPwMrbOhJloaE5bz5ul',
        notify: 'false' === 'true',
        verify: 'false' === 'true',
        visitor: 'true' === 'true',
        avatar: 'mm',
        pageSize: '10',
        lang: 'zh-cn',
        placeholder: 'just go go'
    });
</script>

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/2020/04/03/wu-ren-ji-kai-fa-zong-jie-04-gou-jian-wu-ren-ji-zhuang-tai-zhuan-yi-mo-xing/">
                    <div class="card-image">
                        
                        <img src="https://s1.ax1x.com/2020/03/23/8TJdZ8.jpg" class="responsive-img" alt="[无人机-开发总结04]-构建无人机状态转移模型">
                        
                        <span class="card-title">[无人机-开发总结04]-构建无人机状态转移模型</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            无人机仿真模型构建、gazebo仿真环境搭建、无人机数据集采集
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2020-04-03
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E5%BC%80%E5%8F%91%E6%80%BB%E7%BB%93/" class="post-category">
                                    开发总结
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/%E6%97%A0%E4%BA%BA%E6%9C%BA%E5%BC%80%E5%8F%91/">
                        <span class="chip bg-color">无人机开发</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2020/03/23/shu-mei-pai-kai-fa-zong-jie-01-ke-chuan-dai-shi-zhi-neng-she-bei/">
                    <div class="card-image">
                        
                        <img src="https://pic.downk.cc/item/5e784f0c5c56091129753b1b.jpg" class="responsive-img" alt="[树莓派-开发总结01]-可穿戴式智能设备">
                        
                        <span class="card-title">[树莓派-开发总结01]-可穿戴式智能设备</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            用树莓派制作一个智能可穿戴式设备
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2020-03-23
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E5%BC%80%E5%8F%91%E6%80%BB%E7%BB%93/" class="post-category">
                                    开发总结
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/%E6%A0%91%E8%8E%93%E6%B4%BE%E5%BC%80%E5%8F%91/">
                        <span class="chip bg-color">树莓派开发</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>

    
<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


<!-- 代码块折行 -->

<style type="text/css">
code[class*="language-"], pre[class*="language-"] { white-space: pre !important; }
</style>

    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            // headingsOffset: -205,
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>


<script src="https://cdn.bootcss.com/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script>
    MathJax.Hub.Config({
        tex2jax: {inlineMath: [['$', '$'], ['\(', '\)']]}
    });
</script>



    <footer class="page-footer bg-color">
    <div class="container row center-align">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            <span id="year">年份</span>
            <a href="http://fei0511.github.io" target="_blank">fei</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            &nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span
                class="white-color">12.4k</span>&nbsp;字
            
            
            
            
            
            
            <span id="busuanzi_container_site_pv">
                |&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv"
                    class="white-color"></span>&nbsp;次
            </span>
            
            
            <span id="busuanzi_container_site_uv">
                |&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;<span id="busuanzi_value_site_uv"
                    class="white-color"></span>&nbsp;人
            </span>
            
            <br>
            
            <span id="sitetime">载入运行时间...</span>
            <script>
                function siteTime() {
                    window.setTimeout("siteTime()", 1000);
                    var seconds = 1000;
                    var minutes = seconds * 60;
                    var hours = minutes * 60;
                    var days = hours * 24;
                    var years = days * 365;
                    var today = new Date();
                    var startYear = "2019";
                    var startMonth = "11";
                    var startDate = "27";
                    var startHour = "0";
                    var startMinute = "0";
                    var startSecond = "0";
                    var todayYear = today.getFullYear();
                    var todayMonth = today.getMonth() + 1;
                    var todayDate = today.getDate();
                    var todayHour = today.getHours();
                    var todayMinute = today.getMinutes();
                    var todaySecond = today.getSeconds();
                    var t1 = Date.UTC(startYear, startMonth, startDate, startHour, startMinute, startSecond);
                    var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
                    var diff = t2 - t1;
                    var diffYears = Math.floor(diff / years);
                    var diffDays = Math.floor((diff / days) - diffYears * 365);
                    var diffHours = Math.floor((diff - (diffYears * 365 + diffDays) * days) / hours);
                    var diffMinutes = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours) /
                        minutes);
                    var diffSeconds = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours -
                        diffMinutes * minutes) / seconds);
                    if (startYear == todayYear) {
                        document.getElementById("year").innerHTML = todayYear;
                        document.getElementById("sitetime").innerHTML = "本站已安全运行 " + diffDays + " 天 " + diffHours +
                            " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                    } else {
                        document.getElementById("year").innerHTML = startYear + " - " + todayYear;
                        document.getElementById("sitetime").innerHTML = "本站已安全运行 " + diffYears + " 年 " + diffDays +
                            " 天 " + diffHours + " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                    }
                }
                setInterval(siteTime, 1000);
            </script>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/fei0511" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:1277051100@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=1277051100" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 1277051100" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>





    <a href="https://www.zhihu.com/people/you-yuan-42-92" class="tooltipped" target="_blank" data-tooltip="关注我的知乎: https://www.zhihu.com/people/you-yuan-42-92" data-position="top" data-delay="50">
        <i class="fab fa-zhihu1">知</i>
    </a>



    <a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50">
        <i class="fas fa-rss"></i>
    </a>

</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script src="/js/search.js"></script>
<script type="text/javascript">
$(function () {
    searchFunc("/" + "search.xml", 'searchInput', 'searchResult');
});
</script>
    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    <!-- Global site tag (gtag.js) - Google Analytics -->


    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

    

    

    
    <script type="text/javascript" src="/libs/background/ribbon-dynamic.js" async="async"></script>
    
    
    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
